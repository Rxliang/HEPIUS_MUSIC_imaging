function demodFreq_MHz = demodfreqcheckfn(freq_MHz, noWarning)

if nargin < 2
  noWarning=0;
end

% checks that a demodulation frequency is one of the set,
% and returns closest frequency if this is not the case

% from Vantage Sequence Programming Manual Feb 2018
% demodFrequency decimSampleRate ADCRate 250MHz/N decimFactor

Tab = [
   15.6250   62.5000   62.5000    4.0000    1.0000
   12.5000   50.0000   50.0000    5.0000    1.0000
   10.4167   41.6670   41.6667    6.0000    1.0000
    8.9286   35.7143   35.7143    7.0000    1.0000
    7.8125   31.2500   62.5000    4.0000    2.0000
    6.9444   27.7778   27.7778    9.0000    1.0000
    6.2500   25.0000   50.0000    5.0000    2.0000
    5.6818   22.7273   22.7273   11.0000    1.0000
    5.2083   20.8333   62.5000    4.0000    3.0000
    4.8077   19.2308   19.2308   13.0000    1.0000
    4.4643   17.8571   35.7143    7.0000    2.0000
    4.1667   16.6667   50.0000    5.0000    3.0000
    3.9062   15.6250   62.5000    4.0000    4.0000
    3.6765   14.7059   14.7059   17.0000    1.0000
    3.4722   13.8889   41.6667    6.0000    3.0000
    3.2895   13.1579   13.1579   19.0000    1.0000
    3.1250   12.5000   62.5000    4.0000    5.0000
    2.9762   11.9048   35.7143    7.0000    3.0000
    2.8409   11.3636   22.7273   11.0000    2.0000
    2.7174   10.8696   10.8696   23.0000    1.0000
    2.6042   10.4167   62.5000    4.0000    6.0000
    2.5000   10.0000   50.0000    5.0000    5.0000
    2.4038    9.6154   19.2308   13.0000    2.0000
    2.3148    9.2593   27.7778    9.0000    3.0000
    2.2321    8.9286   62.5000    4.0000    7.0000
    2.0833    8.3333   50.0000    5.0000    6.0000
    1.9531    7.8125   62.5000    4.0000    8.0000
    1.8939    7.5758   22.7273   11.0000    3.0000
    1.8382    7.3529   14.7059   17.0000    2.0000
    1.7857    7.1429   50.0000    5.0000    7.0000
    1.7361    6.9444   41.6667    6.0000    6.0000
    1.6447    6.5789   13.1579   19.0000    2.0000
    1.6026    6.4103   19.2308   13.0000    3.0000
    1.5625    6.2500   50.0000    5.0000    8.0000
    1.4881    5.9524   41.6667    6.0000    7.0000
    1.4205    5.6818   22.7273   11.0000    4.0000
    1.3889    5.5556   27.7778    9.0000    5.0000
    1.3587    5.4348   10.8696   23.0000    2.0000
    1.3021    5.2083   41.6667    6.0000    8.0000
    1.2755    5.1020   35.7143    7.0000    7.0000
    1.2500    5.0000   25.0000   10.0000    5.0000
    1.2255    4.9020   14.7059   17.0000    3.0000
    1.2019    4.8077   19.2308   13.0000    4.0000
    1.1574    4.6296   27.7778    9.0000    6.0000
    1.1364    4.5455   22.7273   11.0000    5.0000
    1.1161    4.4643   35.7143    7.0000    8.0000
    1.0965    4.3860   13.1579   19.0000    3.0000
    1.0417    4.1667   25.0000   10.0000    6.0000
    0.9921    3.9683   27.7778    9.0000    7.0000
    0.9766    3.9062   31.2500    8.0000    8.0000
    0.9615    3.8462   19.2308   13.0000    5.0000
    0.9470    3.7879   22.7778   11.0000    6.0000
    0.9191    3.6765   14.7059   17.0000    4.0000
    0.9058    3.6232   10.8696   23.0000    3.0000
    0.8929    3.5714   25.0000   10.0000    7.0000
    0.8681    3.4722   27.7778    9.0000    8.0000
    0.8333    3.3333   16.6667   15.0000    5.0000
    0.8224    3.2895   13.1579   19.0000    4.0000
    0.8117    3.2468   22.7273   11.0000    7.0000
    0.8013    3.2051   19.2308   13.0000    6.0000
    0.7812    3.1250   25.0000   10.0000    8.0000
    0.7440    2.9762   20.8333   12.0000    7.0000
    0.7353    2.9412   14.7059   17.0000    5.0000
    0.7102    2.8409   22.7273   11.0000    8.0000
    0.6944    2.7778   16.6667   15.0000    6.0000
    0.6868    2.7473   19.2308   13.0000    7.0000
    0.6793    2.7174   10.8696   23.0000    4.0000
    0.6579    2.6316   13.1579   19.0000    5.0000
    0.6510    2.6042   20.8333   12.0000    8.0000
    0.6378    2.5510   17.8571   14.0000    7.0000
    0.6250    2.5000   12.5000   20.0000    5.0000];


demodFreqList_MHz = Tab(:,1);

ind = find(freq_MHz==demodFreqList_MHz);
if isempty(ind)
  demodFreq_MHz = findclosestinvec(demodFreqList_MHz, freq_MHz);
  if ~noWarning
    disp('Could not find match among demodFreq list');
    disp(['Closest match is: ' num2str(demodFreq_MHz)]);
    pausede;
  end
  
else
  demodFreq_MHz = freq_MHz;
end

    